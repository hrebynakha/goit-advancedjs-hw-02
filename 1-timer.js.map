{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst datePickElement = document.querySelector('#datetime-picker');\nconst timeContainer = document.querySelector('.timer');\nconst refs = {\n  main: document.querySelector('body'),\n  startBtn: document.querySelector('button'),\n  days: timeContainer.children[0].children[0],\n  hours: timeContainer.children[1].children[0],\n  minutes: timeContainer.children[2].children[0],\n  seconds: timeContainer.children[3].children[0],\n};\nrefs.startBtn.disabled = true;\nlet pickedDate = new Date();\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: pickedDate,\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    pickedDate = selectedDates[0].getTime();\n    if (pickedDate - Date.now() <= 0) {\n      displayError();\n      refs.startBtn.disabled = true;\n      return;\n    }\n    refs.startBtn.disabled = false;\n    refs.startBtn.dataset.start = pickedDate;\n  },\n};\nrefs.startBtn.addEventListener('click', handleTimerStart);\nflatpickr(datePickElement, options);\n\nfunction handleTimerStart() {\n  if (!refs.startBtn.dataset.start) {\n    displayError();\n    return;\n  }\n  const diff = refs.startBtn.dataset.start - Date.now();\n  if (diff <= 0) {\n    displayError();\n    return;\n  }\n  setTimerText(diff);\n  refs.startBtn.disabled = true;\n  datePickElement.disabled = true;\n  refs.main.classList.add('timer-active');\n\n  const intervalId = setInterval(() => {\n    const diff = refs.startBtn.dataset.start - Date.now();\n    if (diff <= 0) {\n      clearInterval(intervalId);\n      datePickElement.disabled = false;\n      refs.startBtn.disabled = false;\n      refs.main.classList.remove('timer-active');\n      return;\n    }\n    setTimerText(diff);\n  }, 1000);\n}\n\nfunction padify(text) {\n  return String(text).toString().padStart(2, '0');\n}\n\nfunction setTimerText(diff) {\n  const { days, hours, minutes, seconds } = convertMs(diff);\n  refs.days.textContent = padify(days);\n  refs.hours.textContent = padify(hours);\n  refs.minutes.textContent = padify(minutes);\n  refs.seconds.textContent = padify(seconds);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction displayError() {\n  iziToast.error({\n    message: 'Please choose a date in the future',\n    position: 'topRight',\n  });\n}\n"],"names":["datePickElement","timeContainer","refs","pickedDate","options","selectedDates","displayError","handleTimerStart","flatpickr","diff","setTimerText","intervalId","padify","text","days","hours","minutes","seconds","convertMs","ms","iziToast"],"mappings":"+IAKA,MAAMA,EAAkB,SAAS,cAAc,kBAAkB,EAC3DC,EAAgB,SAAS,cAAc,QAAQ,EAC/CC,EAAO,CACX,KAAM,SAAS,cAAc,MAAM,EACnC,SAAU,SAAS,cAAc,QAAQ,EACzC,KAAMD,EAAc,SAAS,CAAC,EAAE,SAAS,CAAC,EAC1C,MAAOA,EAAc,SAAS,CAAC,EAAE,SAAS,CAAC,EAC3C,QAASA,EAAc,SAAS,CAAC,EAAE,SAAS,CAAC,EAC7C,QAASA,EAAc,SAAS,CAAC,EAAE,SAAS,CAAC,CAC/C,EACAC,EAAK,SAAS,SAAW,GACzB,IAAIC,EAAa,IAAI,KAErB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAaD,EACb,gBAAiB,EACjB,QAAQE,EAAe,CAErB,GADAF,EAAaE,EAAc,CAAC,EAAE,QAAO,EACjCF,EAAa,KAAK,IAAG,GAAM,EAAG,CAChCG,IACAJ,EAAK,SAAS,SAAW,GACzB,MACD,CACDA,EAAK,SAAS,SAAW,GACzBA,EAAK,SAAS,QAAQ,MAAQC,CAC/B,CACH,EACAD,EAAK,SAAS,iBAAiB,QAASK,CAAgB,EACxDC,EAAUR,EAAiBI,CAAO,EAElC,SAASG,GAAmB,CAC1B,GAAI,CAACL,EAAK,SAAS,QAAQ,MAAO,CAChCI,IACA,MACD,CACD,MAAMG,EAAOP,EAAK,SAAS,QAAQ,MAAQ,KAAK,MAChD,GAAIO,GAAQ,EAAG,CACbH,IACA,MACD,CACDI,EAAaD,CAAI,EACjBP,EAAK,SAAS,SAAW,GACzBF,EAAgB,SAAW,GAC3BE,EAAK,KAAK,UAAU,IAAI,cAAc,EAEtC,MAAMS,EAAa,YAAY,IAAM,CACnC,MAAMF,EAAOP,EAAK,SAAS,QAAQ,MAAQ,KAAK,MAChD,GAAIO,GAAQ,EAAG,CACb,cAAcE,CAAU,EACxBX,EAAgB,SAAW,GAC3BE,EAAK,SAAS,SAAW,GACzBA,EAAK,KAAK,UAAU,OAAO,cAAc,EACzC,MACD,CACDQ,EAAaD,CAAI,CAClB,EAAE,GAAI,CACT,CAEA,SAASG,EAAOC,EAAM,CACpB,OAAO,OAAOA,CAAI,EAAE,SAAU,EAAC,SAAS,EAAG,GAAG,CAChD,CAEA,SAASH,EAAaD,EAAM,CAC1B,KAAM,CAAE,KAAAK,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUT,CAAI,EACxDP,EAAK,KAAK,YAAcU,EAAOE,CAAI,EACnCZ,EAAK,MAAM,YAAcU,EAAOG,CAAK,EACrCb,EAAK,QAAQ,YAAcU,EAAOI,CAAO,EACzCd,EAAK,QAAQ,YAAcU,EAAOK,CAAO,CAC3C,CAEA,SAASC,EAAUC,EAAI,CAMrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAC1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EACpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EACjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASX,GAAe,CACtBc,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UACd,CAAG,CACH"}